# 프롬프트 사용 확인 가이드

## 🔍 문제 진단

챗봇이 관리자 페이지의 프롬프트를 제대로 참고하지 않는 것 같을 때 확인하는 방법입니다.

## 📊 확인 방법

### 1. 서버 로그 확인

서버를 실행하고 챗봇에서 질문을 입력하면 다음과 같은 로그가 표시됩니다:

#### 프롬프트 로드 확인
```
✅ [DB] 데이터베이스에서 프롬프트를 성공적으로 가져왔습니다.
✅ [DB] 프롬프트 길이: 2847 자
✅ [DB] 프롬프트 시작 부분: 당신은 정우특수코팅의 코팅 전문 상담 AI입니다...
✅ [DB] 프롬프트 끝 부분: ...연락처 안내 섹션을 참고하세요.
```

#### 프롬프트 내용 확인
```
📋 [Gemini Pro] ========== 프롬프트 확인 ==========
📋 [Gemini Pro] 프롬프트 전체 길이: 2847 자
📋 [Gemini Pro] 프롬프트 시작 부분: 당신은 정우특수코팅의 코팅 전문 상담 AI입니다...
📋 [Gemini Pro] 프롬프트에 "라미네이팅" 포함 여부: ✅ 포함됨
📋 [Gemini Pro] 프롬프트에 "기본 단가" 포함 여부: ✅ 포함됨
📋 [Gemini Pro] 프롬프트에 "수량별 할인" 포함 여부: ✅ 포함됨
📋 [Gemini Pro] 라미네이팅 관련 섹션: 라미네이팅 견적\n\n기본 단가: A4 기준 약 800-1,500원/매...
📋 [Gemini Pro] ====================================
```

#### System Instruction 설정 확인
```
🔧 [Gemini Pro] System Instruction 설정 중...
🔧 [Gemini Pro] System Instruction 프롬프트 길이: 2847 자
✅ [Gemini Pro] 모델 초기화 완료: gemini-pro
✅ [Gemini Pro] System Instruction이 프롬프트로 설정되었습니다.
```

#### API 응답 확인
```
📤 [Gemini Pro] Gemini API에 메시지 전송: 라미네이팅 견적에 대해 상세히 안내해주세요...
✅ [Gemini Pro] API 응답 수신 완료
📤 [Gemini Pro] 원본 답변 길이: 456 자
📤 [Gemini Pro] 원본 답변 전체: 라미네이팅 견적에 대해 안내해 드리겠습니다. 1. 기본 단가 (A4 기준, 장당): • 유광 라미네이팅: 약 800원 - 1,500원/매...
📤 [Gemini Pro] 답변에 "라미네이팅" 포함 여부: ✅ 포함됨
📤 [Gemini Pro] 답변에 "기본 단가" 포함 여부: ✅ 포함됨
```

### 2. 문제 진단

#### 시나리오 1: 프롬프트가 로드되지 않음
```
❌ DB에 프롬프트가 저장되어 있지 않습니다.
```
**해결**: 관리자 페이지에서 프롬프트를 저장하세요.

#### 시나리오 2: 프롬프트는 로드되지만 내용이 없음
```
✅ [DB] 프롬프트 길이: 0 자
```
**해결**: 관리자 페이지에서 프롬프트 내용을 확인하고 저장하세요.

#### 시나리오 3: 프롬프트는 있지만 특정 내용이 없음
```
📋 [Gemini Pro] 프롬프트에 "라미네이팅" 포함 여부: ❌ 포함되지 않음
```
**해결**: 관리자 페이지에서 프롬프트에 라미네이팅 관련 내용을 추가하세요.

#### 시나리오 4: 프롬프트는 있지만 Gemini가 따르지 않음
```
📋 [Gemini Pro] 프롬프트에 "라미네이팅" 포함 여부: ✅ 포함됨
📤 [Gemini Pro] 답변에 "라미네이팅" 포함 여부: ❌ 포함되지 않음
```
**해결**: 프롬프트 구조를 개선하거나 메시지 보강 로직을 확인하세요.

## 🔧 문제 해결 단계

### Step 1: 프롬프트 로드 확인
1. 서버 로그에서 `✅ [DB] 데이터베이스에서 프롬프트를 성공적으로 가져왔습니다.` 확인
2. 프롬프트 길이가 0이 아닌지 확인

### Step 2: 프롬프트 내용 확인
1. 서버 로그에서 `📋 [Gemini Pro] 프롬프트에 "라미네이팅" 포함 여부` 확인
2. 필요한 키워드가 포함되어 있는지 확인

### Step 3: System Instruction 확인
1. 서버 로그에서 `✅ [Gemini Pro] System Instruction이 프롬프트로 설정되었습니다.` 확인
2. 프롬프트 길이가 올바른지 확인

### Step 4: API 응답 확인
1. 서버 로그에서 `📤 [Gemini Pro] 원본 답변 전체` 확인
2. 답변에 필요한 정보가 포함되어 있는지 확인

## 📝 체크리스트

- [ ] 프롬프트가 DB에서 로드되는가?
- [ ] 프롬프트 길이가 0이 아닌가?
- [ ] 프롬프트에 필요한 키워드가 포함되어 있는가?
- [ ] System Instruction이 제대로 설정되었는가?
- [ ] Gemini API 응답에 필요한 정보가 포함되어 있는가?

## 🎯 예상 문제와 해결

### 문제 1: 프롬프트가 로드되지 않음
**원인**: DB에 프롬프트가 저장되지 않음
**해결**: 관리자 페이지에서 프롬프트 저장

### 문제 2: 프롬프트는 있지만 내용이 다름
**원인**: 관리자 페이지에 표시된 내용과 DB에 저장된 내용이 다를 수 있음
**해결**: 관리자 페이지에서 다시 저장

### 문제 3: 프롬프트는 있지만 Gemini가 따르지 않음
**원인**: 프롬프트 구조 문제 또는 Gemini API 설정 문제
**해결**: 프롬프트 구조 개선 또는 메시지 보강 로직 확인

이제 서버 로그를 확인하면 프롬프트가 제대로 사용되는지 명확하게 알 수 있습니다! 🔍

